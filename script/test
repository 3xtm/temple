#!/bin/bash
#
# Runs all tests.

set -euo pipefail
source "$(dirname "$0")/utilities.bash"

header "Tests"
go test -v

header "Examples"
for example in examples/*; do
  if [ ! -d "$example" ]; then
    continue
  fi
  header "Example ${example}"
  go run *.go --json-data-file "${example}/"*.json "${example}/"*.template
done

header "Linter"
gometalinter \
  --deadline=1m \
  --vendored-linters \
  --disable=gotype

# vim: set ft=sh :
