#!/bin/bash
#
# Runs all tests.

set -euo pipefail
source "$(dirname "$0")/utilities.bash"

header "Tests"
govendor test -v +local

header "Examples"
for example in examples/*; do
  if [ ! -d "$example" ]; then
    continue
  fi

  header "Example ${example}"
  if [ -f "${example}/"*.json ]; then
    go run *.go --json-data-file "${example}/"*.json "${example}/"*.template
  else
    go run *.go "${example}/"*.template
  fi
done

header "Linter"
gometalinter \
  --deadline=1m \
  --vendored-linters \
  --disable=gotype

# vim: set ft=sh :
